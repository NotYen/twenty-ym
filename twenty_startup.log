🚀 Twenty CRM 一鍵啟動系統
==========================================

1️⃣  檢查系統環境...
   ✅ 系統環境檢查通過

2️⃣  啟動 PostgreSQL (端口 5432)...
   🔄 正在啟動 PostgreSQL...
==> Successfully started `postgresql@16` (label: homebrew.mxcl.postgresql@16)
   ✅ PostgreSQL 已啟動

3️⃣  啟動 Redis (端口 6379)...
   🔄 正在啟動 Redis...
==> Successfully started `redis` (label: homebrew.mxcl.redis)
   ✅ Redis 已啟動
   🧹 清除 Redis 快取...
   ✅ Redis 快取已清除

4️⃣  檢查端口衝突...
   ✅ 端口檢查通過

5️⃣  配置環境變數...
   ✅ 環境變數已設置

   📋 關鍵配置：
      FRONTEND_URL: http://118.168.188.27.nip.io:8866
      SERVER_URL: http://118.168.188.27.nip.io:8867
      DEFAULT_SUBDOMAIN: apple
      IS_MULTIWORKSPACE_ENABLED: true

6️⃣  啟動 Twenty CRM 服務...
   ⏳ 等待後端啟動...
7️⃣  等待後端 API 完全就緒...
   ⏳ 等待後端啟動... (2/60 秒)
   ⏳ 等待後端啟動... (4/60 秒)
   ⏳ 等待後端啟動... (6/60 秒)
   ✅ 後端 API 端口已監聽 (8867)
   ⏳ 等待後端初始化完成...
   ✅ 後端健康檢查通過

8️⃣  等待前端 Web 就緒...
   ✅ 前端 Web 已就緒 (8866)

9️⃣  啟動 Worker 服務...
   ✅ Worker 已啟動 (PID: 63653)

🔟 驗證多租戶配置...
   後端配置檢查：
   - frontDomain: 118.168.188.27.nip.io
   - defaultSubdomain: apple
   ✅ 配置正確

==========================================
✅ Twenty CRM 啟動完成！
==========================================

📍 訪問地址：
   前端 Web:  http://118.168.188.27.nip.io:8866
   後端 API:  http://118.168.188.27.nip.io:8867
   默認工作區: apple.118.168.188.27.nip.io:8866

📝 查看日誌: tail -f twenty.log
🛑 停止服務: ./stop-twenty-local.sh
🔍 診斷問題: ./診斷並修復.sh

💡 提示：
   - 首次訪問請使用: http://apple.118.168.188.27.nip.io:8866
   - 如果遇到跳轉錯誤，請運行診斷腳本

