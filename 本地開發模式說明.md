# Twenty CRM - é–‹ç™¼æ¨¡å¼ä½¿ç”¨èªªæ˜

æœ¬å°ˆæ¡ˆæ”¯æ´å…©ç¨®é–‹ç™¼æ¨¡å¼ï¼Œæ‚¨å¯ä»¥æ ¹æ“šéœ€æ±‚é¸æ“‡ï¼š

---

## ğŸ³ æ¨¡å¼ä¸€ï¼šDocker æ¸¬è©¦ç’°å¢ƒ

**é©ç”¨å ´æ™¯ï¼š**
- æ¸¬è©¦å®Œæ•´çš„ Docker éƒ¨ç½²
- æ¸¬è©¦ç”Ÿç”¢ç’°å¢ƒé…ç½®
- éœ€è¦å®Œå…¨éš”é›¢çš„æ¸¬è©¦ç’°å¢ƒ

**ä½¿ç”¨æ–¹å¼ï¼š**

```cmd
# åœæ­¢å®¹å™¨
docker-compose -f deployment/docker-compose.local-test.yml down

# é‡æ–° build imageï¼ˆåŒ…å«æœ€æ–°ç¨‹å¼ç¢¼ï¼‰
docker build -f packages/twenty-docker/twenty/Dockerfile -t twenty-zh-tw:latest --no-cache .

# å•Ÿå‹•æœå‹™
docker-compose -f deployment/docker-compose.local-test.yml up
```

**å­˜å–ä½å€ï¼š**
- æ‡‰ç”¨ç¨‹å¼ï¼šhttp://localhost:9999
- è³‡æ–™åº«ï¼šDocker å…§éƒ¨ï¼ˆç„¡æ³•å¾å¤–éƒ¨å­˜å–ï¼‰
- Redisï¼šlocalhost:16379

**ç’°å¢ƒé…ç½®ï¼š**
- ä½¿ç”¨ `deployment/docker-compose.local-test.yml` ä¸­çš„ç’°å¢ƒè®Šæ•¸

---

## ğŸ’» æ¨¡å¼äºŒï¼šæœ¬åœ°é–‹ç™¼æ¨¡å¼ âš¡ï¼ˆæ¨è–¦ç”¨æ–¼é–‹ç™¼ï¼‰

**é©ç”¨å ´æ™¯ï¼š**
- æ—¥å¸¸é–‹ç™¼å·¥ä½œ
- å¿«é€Ÿæ¸¬è©¦ç¨‹å¼ç¢¼ä¿®æ”¹
- é™¤éŒ¯å’Œè¿½è¹¤å•é¡Œ
- éœ€è¦ Hot Reload åŠŸèƒ½

**å„ªé»ï¼š**
- âœ… ç¨‹å¼ç¢¼ä¿®æ”¹è‡ªå‹•é‡æ–°è¼‰å…¥ï¼ˆHot Reloadï¼‰
- âœ… ä¸éœ€è¦é‡æ–° build Docker image
- âœ… å¯ä»¥ç›´æ¥åœ¨ IDE ä¸­é™¤éŒ¯
- âœ… å•Ÿå‹•é€Ÿåº¦å¿«ï¼ˆ2-3 åˆ†é˜ vs 10-20 åˆ†é˜ï¼‰
- âœ… èˆ‡ Docker è³‡æ–™åº«å…±ç”¨è³‡æ–™ï¼ˆæ–¹ä¾¿æ¸¬è©¦ï¼‰

**ä½¿ç”¨æ–¹å¼ï¼š**

```cmd
# 1. å•Ÿå‹• Docker è³‡æ–™åº«å’Œ Redisï¼ˆå¦‚æœé‚„æ²’å•Ÿå‹•ï¼‰
docker-compose -f deployment/docker-compose.local-test.yml up -d db-test redis-test

# 2. åœæ­¢ Docker ä¸­çš„ serverï¼ˆé¿å…ç«¯å£è¡çªï¼‰
docker-compose -f deployment/docker-compose.local-test.yml stop server-test worker-test

# 3. ç¬¬ä¸€æ¬¡å•Ÿå‹•æœ¬åœ°é–‹ç™¼ä¼ºæœå™¨ï¼Œå®‰è£package.jsonä¸­å®£å‘Šçš„ç›¸ä¾å¥—ä»¶
yarn install

# 4. å•Ÿå‹•æœ¬åœ°é–‹ç™¼ä¼ºæœå™¨
yarn dev:local
```

**å­˜å–ä½å€ï¼š**
- å‰ç«¯æ‡‰ç”¨ï¼šhttp://localhost:3001
- å¾Œç«¯ APIï¼šhttp://localhost:3000
- è³‡æ–™åº«ï¼šlocalhost:15432ï¼ˆé€£æ¥åˆ° Docker è³‡æ–™åº«ï¼‰
- Redisï¼šlocalhost:16379ï¼ˆé€£æ¥åˆ° Docker Redisï¼‰

**ç’°å¢ƒé…ç½®ï¼š**
- å¾Œç«¯ï¼š`packages/twenty-server/.env.local`
- å‰ç«¯ï¼š`packages/twenty-front/.env.local`

---

## ğŸ“Š å…©ç¨®æ¨¡å¼å°æ¯”

| é …ç›® | Docker æ¨¡å¼ | æœ¬åœ°é–‹ç™¼æ¨¡å¼ |
|------|-------------|--------------|
| å•Ÿå‹•é€Ÿåº¦ | æ…¢ï¼ˆ10-20 åˆ†é˜ï¼‰ | å¿«ï¼ˆ2-3 åˆ†é˜ï¼‰ |
| Hot Reload | âŒ ç„¡ | âœ… æœ‰ |
| ç¨‹å¼ç¢¼ä¿®æ”¹ | éœ€é‡æ–° build | è‡ªå‹•é‡æ–°è¼‰å…¥ |
| é™¤éŒ¯ä¾¿åˆ©æ€§ | è¼ƒå›°é›£ | å®¹æ˜“ï¼ˆIDE ç›´æ¥é™¤éŒ¯ï¼‰ |
| è³‡æºæ¶ˆè€— | é«˜ | ä½ |
| é©ç”¨å ´æ™¯ | æ¸¬è©¦éƒ¨ç½² | æ—¥å¸¸é–‹ç™¼ |
| è³‡æ–™åº« | Docker å…§éƒ¨ | å…±ç”¨ Docker è³‡æ–™åº« |

---

## ğŸ”„ æ¨¡å¼åˆ‡æ›

### å¾ Docker æ¨¡å¼åˆ‡æ›åˆ°æœ¬åœ°é–‹ç™¼æ¨¡å¼

```cmd
# 1. åœæ­¢ Docker serverï¼ˆä¿ç•™è³‡æ–™åº«ï¼‰
docker-compose -f deployment/docker-compose.local-test.yml stop server-test worker-test

# 2. å•Ÿå‹•æœ¬åœ°é–‹ç™¼ä¼ºæœå™¨
yarn dev:local
```

### å¾æœ¬åœ°é–‹ç™¼æ¨¡å¼åˆ‡æ›åˆ° Docker æ¨¡å¼

```cmd
# 1. åœæ­¢æœ¬åœ°é–‹ç™¼ä¼ºæœå™¨ï¼ˆæŒ‰ Ctrl+Cï¼‰

# 2. å•Ÿå‹• Docker
docker-compose -f deployment/docker-compose.local-test.yml up
```

---

## ğŸ› ï¸ ç–‘é›£æ’è§£

### å•é¡Œ 1ï¼šç«¯å£å·²è¢«ä½”ç”¨

**éŒ¯èª¤è¨Šæ¯ï¼š** `Port 3000 is already in use`

**è§£æ±ºæ–¹æ³•ï¼š**
```cmd
# æª¢æŸ¥å“ªå€‹ç¨‹å¼ä½”ç”¨ç«¯å£
netstat -ano | findstr :3000

# åœæ­¢ Docker ä¸­çš„ server
docker-compose -f deployment/docker-compose.local-test.yml stop server-test worker-test
```

### å•é¡Œ 2ï¼šç„¡æ³•é€£æ¥è³‡æ–™åº«

**éŒ¯èª¤è¨Šæ¯ï¼š** `ECONNREFUSED localhost:15432`

**è§£æ±ºæ–¹æ³•ï¼š**
```cmd
# ç¢ºèª Docker è³‡æ–™åº«æ­£åœ¨é‹è¡Œ
docker ps | findstr twenty-db-test

# å¦‚æœæ²’æœ‰é‹è¡Œï¼Œå•Ÿå‹•è³‡æ–™åº«
docker-compose -f deployment/docker-compose.local-test.yml up -d db-test redis-test
```

### å•é¡Œ 3ï¼šç¨‹å¼ç¢¼ä¿®æ”¹æ²’æœ‰ç”Ÿæ•ˆ

**Docker æ¨¡å¼ï¼š**
- å¿…é ˆé‡æ–° build imageï¼š
  ```cmd
  docker build -f packages/twenty-docker/twenty/Dockerfile -t twenty-zh-tw:latest --no-cache .
  ```

**æœ¬åœ°é–‹ç™¼æ¨¡å¼ï¼š**
- æ‡‰è©²æœƒè‡ªå‹•é‡æ–°è¼‰å…¥ï¼Œå¦‚æœæ²’æœ‰ï¼š
  1. æª¢æŸ¥çµ‚ç«¯æ©Ÿæ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯
  2. é‡æ–°å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼ˆCtrl+C å¾Œå†æ¬¡åŸ·è¡Œ `yarn dev:local`ï¼‰

---

## ğŸ“ æ³¨æ„äº‹é …

1. **è³‡æ–™åº«å…±ç”¨**ï¼šå…©ç¨®æ¨¡å¼ä½¿ç”¨ç›¸åŒçš„ Docker è³‡æ–™åº«ï¼Œè³‡æ–™æ˜¯å…±ç”¨çš„
2. **ç’°å¢ƒè®Šæ•¸**ï¼šå…©ç¨®æ¨¡å¼ä½¿ç”¨ä¸åŒçš„ç’°å¢ƒè®Šæ•¸æª”æ¡ˆï¼Œäº’ä¸å½±éŸ¿
3. **ç«¯å£è¡çª**ï¼šåŒæ™‚åªèƒ½é‹è¡Œä¸€ç¨®æ¨¡å¼ï¼Œä¸èƒ½åŒæ™‚é‹è¡Œ
4. **LINE åŠ å¯†é‡‘é‘°**ï¼šå…©ç¨®æ¨¡å¼ä½¿ç”¨ç›¸åŒçš„åŠ å¯†é‡‘é‘°ï¼Œç¢ºä¿è³‡æ–™å¯äº’é€š

---

## ğŸš€ æ¨è–¦å·¥ä½œæµç¨‹

1. **æ—¥å¸¸é–‹ç™¼**ï¼šä½¿ç”¨æœ¬åœ°é–‹ç™¼æ¨¡å¼ï¼ˆå¿«é€Ÿè¿­ä»£ï¼‰
2. **æ¸¬è©¦ LINE æ•´åˆåŠŸèƒ½**ï¼š
   - ä½¿ç”¨æœ¬åœ°é–‹ç™¼æ¨¡å¼
   - ä¿®æ”¹ç¨‹å¼ç¢¼å¾Œç«‹å³ç”Ÿæ•ˆ
   - ä¸éœ€è¦é‡æ–° build Docker
3. **æ¸¬è©¦éƒ¨ç½²å‰**ï¼šåˆ‡æ›åˆ° Docker æ¨¡å¼é€²è¡Œæœ€çµ‚æ¸¬è©¦
4. **æäº¤ç¨‹å¼ç¢¼å‰**ï¼šåœ¨ Docker æ¨¡å¼ä¸‹ç¢ºèªåŠŸèƒ½æ­£å¸¸

---

## ğŸ’¡ é–‹ç™¼å»ºè­°

- ä½¿ç”¨æœ¬åœ°é–‹ç™¼æ¨¡å¼é€²è¡Œæ—¥å¸¸é–‹ç™¼
- åˆ©ç”¨ Hot Reload åŠŸèƒ½å¿«é€Ÿæ¸¬è©¦ä¿®æ”¹
- å®šæœŸåœ¨ Docker æ¨¡å¼ä¸‹æ¸¬è©¦ï¼Œç¢ºä¿éƒ¨ç½²æ²’æœ‰å•é¡Œ
- ä½¿ç”¨ IDE çš„é™¤éŒ¯åŠŸèƒ½ï¼ˆæœ¬åœ°æ¨¡å¼æ”¯æ´ï¼‰
