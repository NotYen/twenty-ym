# ⚡ 同步腳本 - 快速參考

## 🚀 一鍵同步

```bash
cd /Users/ym/twenty-ym/docker/Sync-to-AWS
./同步本地資料到AWS.sh YOUR_AWS_IP
```

## ✅ 同步內容

- ✅ PostgreSQL **完整資料庫**（所有 schema、所有資料）
- ✅ Redis **完整資料**
- ✅ 公司資料
- ✅ 人員資料
- ✅ 報價單
- ✅ Workflow
- ✅ 所有自訂物件

## ⚠️ 重要提醒

1. **會覆蓋 AWS 資料**（但會先備份）
2. **停機 2-3 分鐘**
3. **需要穩定網路**
4. **總耗時約 4-6 分鐘**

## 🛡️ 安全保證

- ✅ 不會初始化資料庫
- ✅ 不會 DROP DATABASE
- ✅ 不會 DROP SCHEMA CASCADE
- ✅ 還原前自動備份 AWS
- ✅ 失敗自動回滾
- ✅ 可隨時恢復

## 📋 執行流程

```
1. 檢查環境          ✅
2. 備份本地資料      ✅
3. 上傳到 AWS        ✅ [確認]
4. 驗證 AWS 環境     ✅
5. 執行還原          ✅ [確認]
6. 驗證結果          ✅

總計：4-6 分鐘
```

## 🐛 快速故障排除

### SSH 連線失敗
```bash
chmod 400 ~/.ssh/y-crm-aws-key.pem
ssh -i ~/.ssh/y-crm-aws-key.pem ubuntu@YOUR_AWS_IP
```

### 容器未運行
```bash
cd /Users/ym/twenty-ym/docker
docker compose up -d
```

### 前端 URL 不正確
```bash
# SSH 到 AWS
cd Sync-to-AWS
./fix-frontend-url.sh http://YOUR_AWS_IP:8867
```

## 📚 完整文件

詳細說明請參閱：`同步腳本使用說明.md`

---

**使用時機**：
- 本地新增了公司/人員資料
- 需要將本地變更同步到 AWS
- 過渡期資料遷移

**注意**：未來主要在 AWS 操作後，就不需要此腳本了！
