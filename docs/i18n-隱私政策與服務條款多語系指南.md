# 隱私政策與服務條款 多語系實作指南

> 版本：2026-01-15
> 作者：Claude AI

---

## 概述

本文件說明「隱私政策」與「服務條款」彈窗內容的多語系架構。

**目前狀態**：僅中文版本
**未來規劃**：逐步新增英文、越南文等語言

---

## 相關檔案

| 檔案 | 用途 |
|------|------|
| `packages/twenty-front/src/modules/auth/sign-in-up/constants/PrivacyPolicyContent.ts` | 隱私政策文本常量 |
| `packages/twenty-front/src/modules/auth/sign-in-up/constants/TermsOfServiceContent.ts` | 服務條款文本常量 |
| `packages/twenty-front/src/modules/auth/sign-in-up/components/LegalDocumentModal.tsx` | 法律文件彈窗組件 |
| `packages/twenty-front/src/modules/auth/sign-in-up/components/FooterNote.tsx` | 頁尾連結觸發組件 |

---

## 目前實作（純中文版）

目前使用純字串常量，尚未整合 Lingui 多語系：

```typescript
// PrivacyPolicyContent.ts
export type PolicySection = {
  title: string;
  content?: string;
  items?: string[];
};

export const PRIVACY_POLICY_TITLE = '隱私權政策';

export const PRIVACY_POLICY_SECTIONS: PolicySection[] = [
  {
    title: '一、個人資料蒐集主體',
    content: '我們的隱私權保護政策適用範圍包括...',
    items: ['...'],
  },
  // ...
];
```

**說明**：此架構設計為模組化結構，方便日後改為多語系版本時只需修改常量檔案。

---

## 未來新增語言的步驟

當需要新增其他語言（如英文、越南文）時，請依照以下步驟操作：

### 步驟 1：修改常量檔案，使用 Lingui `msg` 函數

**修改 `PrivacyPolicyContent.ts`**：

```typescript
import { msg } from '@lingui/core/macro';
import { MessageDescriptor } from '@lingui/core';

// 修改型別定義
export type PolicySection = {
  title: MessageDescriptor;
  content?: MessageDescriptor;
  items?: MessageDescriptor[];
};

// 使用 msg 函數包裝文本
export const PRIVACY_POLICY_TITLE = msg`隱私權政策`;

export const PRIVACY_POLICY_INTRO = msg`洋銘資訊股份有限公司（以下簡稱「洋銘資訊」或「我們」）非常重視您的隱私權...`;

export const PRIVACY_POLICY_SECTIONS: PolicySection[] = [
  {
    title: msg`一、個人資料蒐集主體`,
    content: msg`我們的隱私權保護政策適用範圍包括洋銘所屬網站、應用程式及平台：`,
    items: [
      msg`www.youngming-mes.com 提供洋銘主要服務項目等資訊。`,
      msg`洋銘所提供之應用程式服務。`,
    ],
  },
  // ... 其他章節同樣處理
];
```

**同樣修改 `TermsOfServiceContent.ts`**。

---

### 步驟 2：修改 Modal 組件，使用 `useLingui` 解析翻譯

**修改 `LegalDocumentModal.tsx`**：

```typescript
import { useLingui } from '@lingui/react/macro';
import { MessageDescriptor } from '@lingui/core';

type LegalDocumentModalProps = {
  modalId: string;
  title: MessageDescriptor;      // 改為 MessageDescriptor
  intro: MessageDescriptor;      // 改為 MessageDescriptor
  sections: PolicySection[];
};

export const LegalDocumentModal = ({
  modalId,
  title,
  intro,
  sections,
}: LegalDocumentModalProps) => {
  const { _ } = useLingui();  // 使用 _ 函數解析 MessageDescriptor

  return (
    <Modal modalId={modalId} size="extraLarge" padding="none" isClosable={true}>
      <StyledModalHeader>
        <StyledTitle>{_(title)}</StyledTitle>
        {/* ... */}
      </StyledModalHeader>
      <StyledModalContent>
        <StyledIntro>{_(intro)}</StyledIntro>
        {sections.map((section, index) => (
          <StyledSection key={index}>
            <StyledSectionTitle>{_(section.title)}</StyledSectionTitle>
            {section.content && (
              <StyledSectionContent>{_(section.content)}</StyledSectionContent>
            )}
            {section.items && (
              <StyledList>
                {section.items.map((item, i) => (
                  <StyledListItem key={i}>{_(item)}</StyledListItem>
                ))}
              </StyledList>
            )}
          </StyledSection>
        ))}
      </StyledModalContent>
    </Modal>
  );
};
```

---

### 步驟 3：提取翻譯字串

```bash
cd packages/twenty-front
npx lingui extract
```

這會在 `src/locales/` 目錄下的各語言 `.po` 檔案中新增 msgid。

---

### 步驟 4：編輯翻譯檔案

#### 繁體中文 `zh-TW.po`（維持原文）

```po
#: src/modules/auth/sign-in-up/constants/PrivacyPolicyContent.ts
msgid "隱私權政策"
msgstr "隱私權政策"
```

#### 英文 `en.po`

```po
#: src/modules/auth/sign-in-up/constants/PrivacyPolicyContent.ts
msgid "隱私權政策"
msgstr "Privacy Policy"

#: src/modules/auth/sign-in-up/constants/PrivacyPolicyContent.ts
msgid "一、個人資料蒐集主體"
msgstr "1. Personal Data Collection Entity"
```

#### 越南文 `vi-VN.po`

```po
#: src/modules/auth/sign-in-up/constants/PrivacyPolicyContent.ts
msgid "隱私權政策"
msgstr "Chính sách Bảo mật"
```

---

### 步驟 5：編譯翻譯

```bash
cd packages/twenty-front
npx lingui compile
```

---

### 步驟 6：重新部署

```bash
cd docker
docker-compose build frontend
docker-compose up -d frontend
```

---

## 翻譯檔案位置

| 語言 | 檔案路徑 |
|------|----------|
| 英文 | `packages/twenty-front/src/locales/en.po` |
| 繁體中文 | `packages/twenty-front/src/locales/zh-TW.po` |
| 簡體中文 | `packages/twenty-front/src/locales/zh-CN.po` |
| 越南文 | `packages/twenty-front/src/locales/vi-VN.po` |
| 日文 | `packages/twenty-front/src/locales/ja-JP.po` |

完整支援語言列表請參考 `packages/twenty-shared/src/translations/constants/AppLocales.ts`。

---

## 翻譯來源選項

新增語言時，翻譯內容可透過以下方式取得：

| 方式 | 說明 | 適用情境 |
|------|------|----------|
| **人工翻譯** | 由母語人士或專業翻譯提供 | 正式上線、法律文件 |
| **AI 翻譯** | 使用 ChatGPT、Claude 等 AI 翻譯 | 內部測試、快速迭代 |
| **Crowdin** | 專案已整合，支援機器翻譯 | 大量語言、社群協作 |

---

## Lingui 常用命令

```bash
# 提取所有翻譯字串
cd packages/twenty-front
npx lingui extract

# 編譯翻譯檔案
npx lingui compile

# 使用 Nx 執行
npx nx run twenty-front:lingui:extract
npx nx run twenty-front:lingui:compile
```

---

## 注意事項

1. **`msg` vs `t` 使用時機**
   - `msg`：用於常量檔案、模組頂層（編譯時標記）
   - `t`：用於 React 組件內部（執行時翻譯）

2. **Docker Build 自動編譯**
   - 前端 Dockerfile 的 build 步驟會自動執行 `lingui compile`

3. **法律文件審核**
   - 機器翻譯後建議由法務或母語人士審核重要語言版本

---

## 相關文件

- [Y-CRM 多國語系 (i18n) 翻譯指南](./i18n_多國語系翻譯指南.md)
- [常數多語系實作指南：工廠函數模式](./i18n-常數多語系實作指南.md)
- [前端元件文件](./前端元件文件.md)

---

## 更新紀錄

| 日期 | 說明 |
|------|------|
| 2026-01-15 | 初版建立，目前僅中文版本，保留未來多語系擴展指南 |
