# é›™å› ç´ é©—è­‰ï¼ˆ2FAï¼‰æ–‡æ¡ˆä¿®æ”¹æŒ‡å—

## ğŸ“ æ–‡æ¡ˆä½ç½®åˆ†æ

æ‚¨çœ‹åˆ°çš„é€™äº›æ–‡æ¡ˆä¾†è‡ª **Twenty CRM çš„é›™å› ç´ èº«ä»½é©—è­‰è¨­ç½®é é¢**ã€‚

---

## ğŸ¯ å•é¡Œä¸­çš„æ–‡æ¡ˆå°æ‡‰

### 1ï¸âƒ£ "é›™å› ç´ èº«ä»½é©—è­‰"ï¼ˆæ¨™é¡Œï¼‰
**è‹±æ–‡åŸæ–‡**: `Two Factor Authentication`

**æºä»£ç¢¼ä½ç½®**:
- **æ–‡ä»¶**: `packages/twenty-front/src/pages/settings/SettingsTwoFactorAuthenticationMethod.tsx`
- **è¡Œè™Ÿ**: ç¬¬ 117 è¡Œ
```typescript
title={t`Two Factor Authentication`}
```

**ç¿»è­¯æ–‡ä»¶ä½ç½®**:
- **æ–‡ä»¶**: `packages/twenty-front/src/locales/zh-TW.po`
- **æœç´¢**: `msgid "Two Factor Authentication"`

---

### 2ï¸âƒ£ "åˆªé™¤é›™é‡èº«ä»½é©—è­‰æ–¹æ³•"ï¼ˆå­æ¨™é¡Œï¼‰
**è‹±æ–‡åŸæ–‡**: `Delete Two-Factor Authentication Method`

**æºä»£ç¢¼ä½ç½®**:
- **æ–‡ä»¶**: `packages/twenty-front/src/modules/settings/two-factor-authentication/components/DeleteTwoFactorAuthenticationMethod.tsx`
- **è¡Œè™Ÿ**: ç¬¬ 88 è¡Œ
```typescript
title={t`Delete Two-Factor Authentication Method`}
```

**ç¿»è­¯æ–‡ä»¶ä½ç½®**:
- **æ–‡ä»¶**: `packages/twenty-front/src/locales/zh-TW.po`
```po
msgid "Delete Two-Factor Authentication Method"
msgstr "åˆªé™¤é›™é‡èº«ä»½é©—è­‰æ–¹æ³•"
```

---

### 3ï¸âƒ£ "åˆªé™¤æ­¤æ–¹æ³•å°‡æ°¸ä¹…å¾æ‚¨çš„å¸³æˆ¶ç§»é™¤ã€‚"ï¼ˆæè¿°æ–‡å­—ï¼‰
**è‹±æ–‡åŸæ–‡**: `Deleting this method will remove it permanently from your account.`

**æºä»£ç¢¼ä½ç½®**:
- **æ–‡ä»¶**: `packages/twenty-front/src/modules/settings/two-factor-authentication/components/DeleteTwoFactorAuthenticationMethod.tsx`
- **è¡Œè™Ÿ**: ç¬¬ 89 è¡Œ
```typescript
description={t`Deleting this method will remove it permanently from your account.`}
```

**ç¿»è­¯æ–‡ä»¶ä½ç½®**:
- **æ–‡ä»¶**: `packages/twenty-front/src/locales/zh-TW.po`
```po
msgid "Deleting this method will remove it permanently from your account."
msgstr "åˆªé™¤æ­¤æ–¹æ³•å°‡æ°¸ä¹…å¾æ‚¨çš„å¸³æˆ¶ç§»é™¤ã€‚"
```

---

## ğŸ”§ å¦‚ä½•ä¿®æ”¹é€™äº›æ–‡æ¡ˆ

### æ–¹æ³• 1: ä¿®æ”¹ç¹é«”ä¸­æ–‡ç¿»è­¯æ–‡ä»¶ï¼ˆæ¨è–¦ï¼‰

**æ–‡ä»¶è·¯å¾‘**: `packages/twenty-front/src/locales/zh-TW.po`

**ä¿®æ”¹æ­¥é©Ÿ**:

1. **æ‰“é–‹ç¿»è­¯æ–‡ä»¶**:
```bash
code packages/twenty-front/src/locales/zh-TW.po
```

2. **æœç´¢ä¸¦ä¿®æ”¹æ–‡æ¡ˆ**:
```po
# ä¿®æ”¹å‰
msgid "Delete Two-Factor Authentication Method"
msgstr "åˆªé™¤é›™é‡èº«ä»½é©—è­‰æ–¹æ³•"

# ä¿®æ”¹å¾Œï¼ˆç¤ºä¾‹ï¼‰
msgid "Delete Two-Factor Authentication Method"
msgstr "ç§»é™¤é›™å› ç´ é©—è­‰æ–¹å¼"
```

```po
# ä¿®æ”¹å‰
msgid "Deleting this method will remove it permanently from your account."
msgstr "åˆªé™¤æ­¤æ–¹æ³•å°‡æ°¸ä¹…å¾æ‚¨çš„å¸³æˆ¶ç§»é™¤ã€‚"

# ä¿®æ”¹å¾Œï¼ˆç¤ºä¾‹ï¼‰
msgid "Deleting this method will remove it permanently from your account."
msgstr "æ­¤æ“ä½œå°‡æ°¸ä¹…ç§»é™¤æ‚¨å¸³æˆ¶ä¸­çš„é©—è­‰æ–¹å¼ã€‚"
```

3. **ç·¨è­¯ç¿»è­¯æ–‡ä»¶**:
```bash
cd packages/twenty-front
npx lingui compile
```

4. **é‡æ–°å•Ÿå‹•å‰ç«¯**:
```bash
# å¦‚æœæ˜¯ development æ¨¡å¼
npx nx run twenty-front:start

# å¦‚æœæ˜¯ production æ¨¡å¼
npx nx run twenty-front:build
```

---

### æ–¹æ³• 2: ç›´æ¥ä¿®æ”¹æºä»£ç¢¼ï¼ˆä¸æ¨è–¦ï¼‰

**æ–‡ä»¶è·¯å¾‘**: `packages/twenty-front/src/modules/settings/two-factor-authentication/components/DeleteTwoFactorAuthenticationMethod.tsx`

**ä¿®æ”¹ç¯„ä¾‹**:
```typescript
// ç¬¬ 88-89 è¡Œ
<H2Title
  title={t`åˆªé™¤é›™å› ç´ é©—è­‰æ–¹å¼`}  // ç›´æ¥ä½¿ç”¨ä¸­æ–‡
  description={t`æ­¤æ“ä½œå°‡æ°¸ä¹…ç§»é™¤æ‚¨å¸³æˆ¶ä¸­çš„é©—è­‰æ–¹å¼ã€‚`}  // ç›´æ¥ä½¿ç”¨ä¸­æ–‡
/>
```

âš ï¸ **ä¸æ¨è–¦åŸå› **: 
- ç ´å£åœ‹éš›åŒ–æ¶æ§‹
- å…¶ä»–èªè¨€ç„¡æ³•ä½¿ç”¨
- ç¶­è­·å›°é›£

---

## ğŸ“‚ ç›¸é—œæ–‡ä»¶æ¸…å–®

### 1. æºä»£ç¢¼æ–‡ä»¶
```
packages/twenty-front/src/modules/settings/two-factor-authentication/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ DeleteTwoFactorAuthenticationMethod.tsx  â† ä¸»è¦çµ„ä»¶
â”‚   â”œâ”€â”€ TwoFactorAuthenticationSetupForSettingsEffect.tsx
â”‚   â””â”€â”€ TwoFactorAuthenticationVerificationForSettings.tsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useCurrentUserWorkspaceTwoFactorAuthentication.ts
â”‚   â””â”€â”€ useTwoFactorVerificationForSettings.ts
â””â”€â”€ graphql/
    â””â”€â”€ mutations/
        â””â”€â”€ verifyTwoFactorAuthenticationMethod.ts
```

### 2. é é¢æ–‡ä»¶
```
packages/twenty-front/src/pages/settings/
â””â”€â”€ SettingsTwoFactorAuthenticationMethod.tsx  â† 2FA è¨­ç½®é é¢
```

### 3. ç¿»è­¯æ–‡ä»¶
```
packages/twenty-front/src/locales/
â”œâ”€â”€ zh-TW.po  â† ç¹é«”ä¸­æ–‡ç¿»è­¯
â”œâ”€â”€ zh-CN.po  â† ç°¡é«”ä¸­æ–‡ç¿»è­¯
â””â”€â”€ en.po     â† è‹±æ–‡ï¼ˆåŸå§‹æ–‡æ¡ˆï¼‰
```

---

## ğŸ” æ‰€æœ‰ç›¸é—œçš„ 2FA æ–‡æ¡ˆ

åœ¨ `zh-TW.po` ä¸­æœç´¢é€™äº› msgid å¯ä»¥æ‰¾åˆ°æ‰€æœ‰ç›¸é—œæ–‡æ¡ˆï¼š

| è‹±æ–‡åŸæ–‡ | ç¹é«”ä¸­æ–‡ç¿»è­¯ | è¡Œè™Ÿ |
|---------|-------------|------|
| `Two Factor Authentication` | é›™å› ç´ èº«ä»½é©—è­‰ | - |
| `Delete Two-Factor Authentication Method` | åˆªé™¤é›™é‡èº«ä»½é©—è­‰æ–¹æ³• | - |
| `Deleting this method will remove it permanently from your account.` | åˆªé™¤æ­¤æ–¹æ³•å°‡æ°¸ä¹…å¾æ‚¨çš„å¸³æˆ¶ç§»é™¤ã€‚ | - |
| `Reset 2FA` | é‡ç½® 2FA | - |
| `2FA Method Reset` | 2FA æ–¹æ³•é‡ç½® | - |
| `2FA Method has been deleted successfully.` | 2FA æ–¹æ³•å·²æˆåŠŸåˆªé™¤ã€‚ | - |
| `Invalid 2FA information.` | ç„¡æ•ˆçš„ 2FA ä¿¡æ¯ã€‚ | - |
| `Two-factor authentication setup completed successfully!` | é›™å› ç´ èº«ä»½é©—è­‰è¨­ç½®æˆåŠŸå®Œæˆï¼ | - |

---

## ğŸ¨ Google Authenticator ä¸­çš„é¡¯ç¤º

Google Authenticator æ‡‰ç”¨ä¸­é¡¯ç¤ºçš„**å¸³æˆ¶åç¨±**ä¾†è‡ªæ–¼ï¼š

**æ–‡ä»¶**: `packages/twenty-server/src/modules/user/services/user.service.ts`

**æœç´¢é—œéµå­—**: `otpauth://totp/`

é€™å€‹æ˜¯å¾Œç«¯ç”Ÿæˆçš„ OTP URIï¼Œæ ¼å¼é€šå¸¸æ˜¯ï¼š
```
otpauth://totp/Twenty:user@example.com?secret=XXX&issuer=Twenty
```

å¦‚æœè¦ä¿®æ”¹ Google Authenticator ä¸­é¡¯ç¤ºçš„åç¨±ï¼Œéœ€è¦ä¿®æ”¹å¾Œç«¯çš„ OTP URI ç”Ÿæˆé‚è¼¯ã€‚

---

## âœ… å»ºè­°çš„ä¿®æ”¹æµç¨‹

1. **ä¿®æ”¹ç¿»è­¯æ–‡ä»¶** (`zh-TW.po`)
2. **ç·¨è­¯ç¿»è­¯** (`npx lingui compile`)
3. **é‡æ–° Build å‰ç«¯** (production æ¨¡å¼)
4. **é‡å•Ÿæœå‹™** (`bash start_all_service_start.sh`)
5. **æ¸…é™¤ç€è¦½å™¨å¿«å–**
6. **é‡æ–°ç™»å…¥æŸ¥çœ‹æ•ˆæœ**

---

## ğŸ’¡ Lingui åœ‹éš›åŒ–æ¡†æ¶èªªæ˜

Twenty CRM ä½¿ç”¨ **Lingui** é€²è¡Œåœ‹éš›åŒ–ï¼š

- **æ¨™è¨˜æ–‡æ¡ˆ**: `t\`Text\``ï¼ˆæ¨¡æ¿å­—ä¸²ï¼‰
- **ç·¨è­¯å‘½ä»¤**: `npx lingui extract`ï¼ˆæå–æ–‡æ¡ˆï¼‰â†’ `npx lingui compile`ï¼ˆç·¨è­¯ï¼‰
- **ç¿»è­¯æ ¼å¼**: `.po` æ–‡ä»¶ï¼ˆGettext æ ¼å¼ï¼‰

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤

```bash
# æå–æ‰€æœ‰éœ€è¦ç¿»è­¯çš„æ–‡æ¡ˆ
cd packages/twenty-front
npx lingui extract

# ç·¨è­¯ç¿»è­¯æ–‡ä»¶
npx lingui compile

# æŸ¥çœ‹æ‰€æœ‰ 2FA ç›¸é—œæ–‡æ¡ˆ
grep -i "two.*factor\|2fa" packages/twenty-front/src/locales/zh-TW.po

# æŸ¥çœ‹å…·é«”æ–‡ä»¶ä¸­çš„æ–‡æ¡ˆä½¿ç”¨
grep -r "t\`.*Two Factor" packages/twenty-front/src
```

---

## ğŸ”— ç›¸é—œæ–‡æª”

- **Lingui å®˜æ–¹æ–‡æª”**: https://lingui.dev/
- **Twenty ç¿»è­¯æŒ‡å—**: `packages/twenty-front/README.md`
- **Gettext .po æ ¼å¼**: https://www.gnu.org/software/gettext/manual/html_node/PO-Files.html
